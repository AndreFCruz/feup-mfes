class GithubTest
	
	values
		firstUsername = "sample-username";
		secondUsername = "different-username";
		thirdUsername = "other-username";
		forthUsername = "another-one";
		
		tagFEUP = new Tag("FEUP");
		tagVDM = new Tag("VDM");

	instance variables
		gh : Github := new Github();
		
	operations
		private testAddAccount: () ==> ()
		testAddAccount() ==
		(
			TestUtils`assertTrue(gh.numAccounts() = 0);
			gh.addAccount(new User(firstUsername));
			TestUtils`assertTrue(gh.numAccounts() = 1);
			gh.addAccount(new Organization(secondUsername));
			TestUtils`assertTrue(gh.numAccounts() = 2);
		);

		private testGetReposByTags: () ==> ()
		testGetReposByTags() ==
		(
			let r1 = gh.accounts(firstUsername).newRepository("MFES", true),
					r2 = gh.accounts(secondUsername).newRepository("OVERTURE", true) in (
				r1.addTag(tagFEUP);
				r1.addTag(tagVDM);
				r2.addTag(tagVDM);
				
				TestUtils`assertTrue(r2 not in set gh.getRepositoriesByTags({tagFEUP}));
				TestUtils`assertTrue(r2 in set gh.getRepositoriesByTags({tagVDM}));
			);
		);
		
		private testStargazers: () ==> () 
		testStargazers() == 
		(
			let u = new User(thirdUsername), u2 = new User(forthUsername), r = u.newRepository("VDM++", true) in (
				gh.addAccount(u);
				u.star(r);
				TestUtils`assertTrue(gh.stargazers(r) = {thirdUsername});
				u2.star(r);
				TestUtils`assertTrue(gh.stargazers(r) = {thirdUsername, forthUsername});
				u.unstar(r);
				u2.unstar(r);
				TestUtils`assertTrue(gh.stargazers(r) = {});
			);
		);
	
		public static main: () ==> ()
		main() ==
		(
			let gt = new GithubTest() in (
				gt.testAddAccount();
				gt.testGetReposByTags();
			);
		);

end GithubTest