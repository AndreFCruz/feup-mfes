\begin{vdmpp}[breaklines=true]
class Date
types
 public DateComparable :: date: Date
 ord mk_DateComparable(d1) < mk_DateComparable(d2) ==
  d1.year < d2.year or
  d1.year = d2.year and d1.month < d2.month or
  d1.year = d2.year and d1.month = d2.month and d1.day < d2.day or
  d1.year = d2.year and d1.month = d2.month and d1.day = d2.day and d1.hour < d2.hour or
  d1.year = d2.year and d1.month = d2.month and d1.day = d2.day and d1.hour = d2.hour and d1.minute < d2.minute;

values
 public static startYear = 2000;

instance variables
 private year: nat1;
 private month: nat1;
 private day: nat1;
 private hour: nat;
 private minute: nat;
 
 inv year >= startYear;
 inv month >= 1 and month <= 12;
 inv day >= 1 and day <= daysOfMonth(year, month);
 inv hour >= 0 and hour < 24;
 inv minute >= 0 and minute < 60;
 
operations
(*@
\label{Date:28}
@*)
 public Date: nat1 * nat1 * nat1 * nat * nat ==> Date
 Date(y, mo, d, h, mi) == (
  year := y;
  month := mo;
  day := d;
  hour := h;
  minute := mi;
  return self;
 ) -- No need for pre conditions -> assured by instance variables invariants
 post year = y and month = mo and day = day and hour = h and minute = mi;

functions
(*@
\label{isLeapYear:40}
@*)
 public static isLeapYear(y: nat1) res: bool == y mod 4 = 0
 pre y >= startYear;

(*@
\label{daysOfMonth:43}
@*)
 public static daysOfMonth(y, m: nat1) res : nat == (
  cases m :
   1, 3, 5, 7, 8, 10, 12 -> 31,
   4, 6, 9, 11 -> 30,
   2 -> if isLeapYear(y) then 29 else 28
  end
 )
 pre m >= 1 and m <= 12;

traces
-- TODO Define Combinatorial Test Traces here
end Date
\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[Date:28]{Date} & 28&100.0\% & 16 \\
\hline
\hyperref[daysOfMonth:43]{daysOfMonth} & 43&100.0\% & 2 \\
\hline
\hyperref[isLeapYear:40]{isLeapYear} & 40&100.0\% & 4 \\
\hline
\hline
Date.vdmpp & & 100.0\% & 22 \\
\hline
\end{longtable}

